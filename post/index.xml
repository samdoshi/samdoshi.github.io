<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts on Sam Doshi</title>
    <link>http://samdoshi.com/post/</link>
    <description>Recent content in Posts on Sam Doshi</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-gb</language>
    <lastBuildDate>Sun, 20 Mar 2016 14:00:00 +0000</lastBuildDate>
    <atom:link href="http://samdoshi.com/post/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Euclidean rhythms on the Monome Teletype</title>
      <link>http://samdoshi.com/post/2016/03/teletype-euclidean/</link>
      <pubDate>Sun, 20 Mar 2016 14:00:00 +0000</pubDate>
      
      <guid>http://samdoshi.com/post/2016/03/teletype-euclidean/</guid>
      <description>

&lt;p&gt;Earlier this year I did some work on a Euclidean rhythm operator for the &lt;a href=&#34;http://monome.org/docs/modular/teletype/&#34;&gt;Monome Teletype&lt;/a&gt;. Here is the &lt;a href=&#34;https://github.com/tehn/mod/pull/68&#34;&gt;pull request&lt;/a&gt;&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:d872790bb8e0a4c6a0054e207d563af0:fn-bugfix&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:d872790bb8e0a4c6a0054e207d563af0:fn-bugfix&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;, the &lt;a href=&#34;https://github.com/tehn/mod/releases/tag/v1.11&#34;&gt;beta firmware&lt;/a&gt;, and there is also a thread to discuss it on &lt;a href=&#34;http://llllllll.co/t/a-euclidean-rhythm-operator-for-the-teletype/2344?u=sam&#34;&gt;lines&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&#34;video-container&#34;&gt;
    &lt;iframe class=&#34;youtube-player&#34; type=&#34;text/html&#34; width=&#34;100%&#34; height=&#34;auto&#34; src=&#34;https://www.youtube.com/embed/f2FMVaVkiDo&#34; allowfullscreen frameborder=&#34;0&#34;&gt;
    &lt;/iframe&gt;
&lt;/div&gt;


&lt;h2 id=&#34;euclidean-rhythms:d872790bb8e0a4c6a0054e207d563af0&#34;&gt;Euclidean rhythms&lt;/h2&gt;

&lt;p&gt;Euclidean rhythms were first described by Godfried Toussaint in his 2005 paper &lt;a href=&#34;http://cgm.cs.mcgill.ca/~godfried/publications/banff.pdf&#34;&gt;&amp;ldquo;The Euclidean Algorithm Generates Traditional Musical Rhythms&amp;rdquo;&lt;/a&gt;&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:d872790bb8e0a4c6a0054e207d563af0:fn-citation&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:d872790bb8e0a4c6a0054e207d563af0:fn-citation&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;. From the abstract:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The &lt;em&gt;Euclidean&lt;/em&gt; algorithm (which comes down to us from Euclid&amp;rsquo;s &lt;em&gt;Elements&lt;/em&gt;) computes the greatest common divisor of two given integers. It is shown here that the structure of the Euclidean algorithm may be used to generate, very efficiently, a large family of rhythms used as timelines (&lt;em&gt;ostinatos&lt;/em&gt;), in sub-Saharan African music in particular, and world music in general. These rhythms, here dubbed &lt;em&gt;Euclidean&lt;/em&gt; rhythms, have the property that their onset patterns are distributed as evenly as possible.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Once you&amp;rsquo;re more familiar with how they work, it&amp;rsquo;s well worth having a look through the &lt;a href=&#34;http://cgm.cs.mcgill.ca/~godfried/publications/banff.pdf&#34;&gt;paper&lt;/a&gt;. There is plenty of interesting information in there (along with all the maths).&lt;/p&gt;

&lt;p&gt;In essence a Euclidean rhythm evenly spreads out a numbers of beats (or &lt;em&gt;fill&lt;/em&gt;), along a repeating sequence of a given &lt;em&gt;length&lt;/em&gt;. Thus, the Euclidean rhythm &lt;em&gt;fill=4, length=16&lt;/em&gt;, is &lt;code&gt;x...x...x...x...&lt;/code&gt; (a.k.a. four on the floor at 16&lt;sup&gt;th&lt;/sup&gt; beats). Given that the rhythm repeats, this is more efficiently given as &lt;em&gt;fill=1, length=4&lt;/em&gt;: &lt;code&gt;x...&lt;/code&gt;. More interesting examples are in the &lt;a href=&#34;http://cgm.cs.mcgill.ca/~godfried/publications/banff.pdf&#34;&gt;paper&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;on-the-teletype:d872790bb8e0a4c6a0054e207d563af0&#34;&gt;On the Teletype&lt;/h2&gt;

&lt;p&gt;On the Teletype, Euclidean rhythms are implemented with a new operator, &lt;code&gt;ER&lt;/code&gt; as follows:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ER fill length step
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The operator either returns a &lt;code&gt;0&lt;/code&gt; (i.e. no beat) or a &lt;code&gt;1&lt;/code&gt; (a beat) for a given Euclidean rhythm, where &lt;em&gt;fill&lt;/em&gt; is the number of played beats and &lt;em&gt;length&lt;/em&gt; is the length of a single sequence (as previously described). The 3&lt;sup&gt;rd&lt;/sup&gt; parameter, &lt;em&gt;step&lt;/em&gt;, is the value of the rhythm at a given step. Particular care must be given as &lt;em&gt;step&lt;/em&gt; is &lt;strong&gt;0-based&lt;/strong&gt; like many other operations on the Teletype, i.e. the first step is 0, and the last step in a sequence that has length 16 is 15!&lt;/p&gt;

&lt;p&gt;Both &lt;em&gt;fill&lt;/em&gt; and &lt;em&gt;length&lt;/em&gt; accept values between 1 and 32 inclusive&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:d872790bb8e0a4c6a0054e207d563af0:fn-values&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:d872790bb8e0a4c6a0054e207d563af0:fn-values&#34;&gt;3&lt;/a&gt;&lt;/sup&gt;, where &lt;em&gt;fill&lt;/em&gt; &amp;le; &lt;em&gt;length&lt;/em&gt;. &lt;em&gt;Step&lt;/em&gt; may be any number&amp;mdash;it is modulo (or wrapped) with the length, so that it is always in bounds. Any invalid input results in the operator returning a &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&#34;some-simple-examples:d872790bb8e0a4c6a0054e207d563af0&#34;&gt;Some simple examples&lt;/h2&gt;

&lt;p&gt;Let&amp;rsquo;s look at the example of &lt;em&gt;fill=4, length=16&lt;/em&gt;, i.e. &lt;code&gt;x...x...x...x...&lt;/code&gt;. (These are best entered in &lt;em&gt;LIVE mode&lt;/em&gt;.)&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ER 4 16 0&lt;/code&gt; returns a &lt;code&gt;1&lt;/code&gt; &lt;small&gt;(remember 0 is the first step)&lt;/small&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ER 4 16 1&lt;/code&gt; returns a &lt;code&gt;0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ER 4 16 2&lt;/code&gt; returns a &lt;code&gt;0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ER 4 16 3&lt;/code&gt; returns a &lt;code&gt;0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ER 4 16 4&lt;/code&gt; returns a &lt;code&gt;1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ER 4 16 -1&lt;/code&gt; returns a &lt;code&gt;0&lt;/code&gt; &lt;small&gt;(negative indices can be useful as we&amp;rsquo;ll see&amp;hellip;)&lt;/small&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ER 4 16 -4&lt;/code&gt; returns a &lt;code&gt;1&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Let&amp;rsquo;s create a simple script that outputs a four on the floor rhythm by using the &lt;code&gt;ER&lt;/code&gt; operator. Enter the following scripts as &lt;code&gt;I&lt;/code&gt; and &lt;code&gt;SCRIPT 1&lt;/code&gt;, and then supply a 16&lt;sup&gt;th&lt;/sup&gt; note trigger to input 1.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;I:&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;T 0
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;code&gt;SCRIPT 1:&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span&gt;&lt;/span&gt;IF ER 4 16 T : TR.PULSE A
T ADD 1 T
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;We&amp;rsquo;re using &lt;code&gt;T&lt;/code&gt; to hold which step we&amp;rsquo;re on. We can update &lt;code&gt;SCRIPT 1&lt;/code&gt; to add a second output:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;SCRIPT 1:&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span&gt;&lt;/span&gt;IF ER 4 16 T : TR.PULSE A
IF ER 6 16 T : TR.PULSE B
T ADD 1 T
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&#34;onset-or-rotation-or-offset:d872790bb8e0a4c6a0054e207d563af0&#34;&gt;Onset (or rotation or offset)&lt;/h2&gt;

&lt;p&gt;You might have noticed while playing with the above example that certain combinations of rhythms can&amp;rsquo;t be achieved as things stand, for example:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span&gt;&lt;/span&gt;A: x...x...x...x...
B: ..x...x...x...x.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;In order to create this rhythm we need to &lt;em&gt;rotate&lt;/em&gt; one rhythm against the other. This is sometimes call the offset or the onset. In fact in our example rhythm B is the same A, but rotated 2 steps forwards (or backwards). Let&amp;rsquo;s modify &lt;code&gt;SCRIPT 1&lt;/code&gt; again:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;SCRIPT 1:&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span&gt;&lt;/span&gt;IF ER 4 16 T : TR.PULSE A
Y SUB T 2
IF ER 4 16 Y : TR.PULSE B
T ADD 1 T
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;We&amp;rsquo;ve had to introduce another variable &lt;code&gt;Y&lt;/code&gt; as we can&amp;rsquo;t fit everything on one line&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:d872790bb8e0a4c6a0054e207d563af0:fn-yet&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:d872790bb8e0a4c6a0054e207d563af0:fn-yet&#34;&gt;4&lt;/a&gt;&lt;/sup&gt;. One thing that might not be obvious initially is that if we want to rotate a rhythm forwards we need to &lt;code&gt;SUB&lt;/code&gt;, if we want to rotate a rhythm backwards we need to &lt;code&gt;ADD&lt;/code&gt;. Thus if we want to use rotation with our Euclidean rhythms we can use the following:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span&gt;&lt;/span&gt;ER fill length SUB step rotation
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;where &lt;em&gt;rotation&lt;/em&gt; is the number of steps &lt;em&gt;forward&lt;/em&gt; we wish to rotate the rhythm.&lt;/p&gt;

&lt;h2 id=&#34;a-four-channel-euclidean-drum-machine:d872790bb8e0a4c6a0054e207d563af0&#34;&gt;A four channel Euclidean drum machine&lt;/h2&gt;

&lt;p&gt;Finally, let&amp;rsquo;s recreate part of the drum machine from the video at the top of the page. We&amp;rsquo;re going use the &lt;em&gt;pattern tracker&lt;/em&gt; to hold our values for &lt;em&gt;fill&lt;/em&gt;, &lt;em&gt;length&lt;/em&gt; and &lt;em&gt;rotation&lt;/em&gt; for four drum sequences. Input 0 will be reset, and input 1 will be clock. The four trigger outputs A-D will trigger our drum modules.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;I:&lt;/code&gt; set the time &lt;code&gt;T&lt;/code&gt; to 0&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span&gt;&lt;/span&gt;T 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;code&gt;SCRIPT 1:&lt;/code&gt; reset the time &lt;code&gt;T&lt;/code&gt; to 0&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span&gt;&lt;/span&gt;T 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;code&gt;SCRIPT 2:&lt;/code&gt; trigger scripts 3-6, increase &lt;code&gt;T&lt;/code&gt; by 1&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;SCRIPT 3
SCRIPT 4
SCRIPT 5
SCRIPT 6
T ADD 1 T
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;code&gt;SCRIPT 3:&lt;/code&gt; read &lt;em&gt;fill&lt;/em&gt;, &lt;em&gt;length&lt;/em&gt; and &lt;em&gt;rotation&lt;/em&gt; from the first 3 rows respectively of column 0 of the pattern data&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span&gt;&lt;/span&gt;X PN 0 2
Y ER PN 0 0 PN 0 1 SUB T X
IF Y : TR.PULSE A
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;code&gt;SCRIPT 4:&lt;/code&gt; as script 3, but use column 1&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span&gt;&lt;/span&gt;X PN 1 2
Y ER PN 1 0 PN 1 1 SUB T X
IF Y : TR.PULSE B
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;code&gt;SCRIPT 5:&lt;/code&gt; as script 3, but use column 2&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span&gt;&lt;/span&gt;X PN 2 2
Y ER PN 2 0 PN 2 1 SUB T X
IF Y : TR.PULSE C
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;code&gt;SCRIPT 6:&lt;/code&gt; as scripts 3 but use column 3&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span&gt;&lt;/span&gt;X PN 3 2
Y ER PN 3 0 PN 3 1 SUB T X
IF Y : TR.PULSE D
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;code&gt;PATTERN:&lt;/code&gt; each column contains the &lt;em&gt;fill&lt;/em&gt; in the first row, the &lt;em&gt;length&lt;/em&gt; in the second and the &lt;em&gt;rotation&lt;/em&gt; in the third for the four sequences&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span&gt;&lt;/span&gt;0|   4   6   4   9
1|  16  16  16  16
2|   0   2   2   0
3|   .   .   .   .
4|   .   .   .   .
.|
.|
.|
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Start your clock and play around with the values on the &lt;em&gt;pattern tracker&lt;/em&gt; (you can use the &lt;code&gt;[&lt;/code&gt; and &lt;code&gt;]&lt;/code&gt; keys to increment and decrement the value under the cursor too).&lt;/p&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:d872790bb8e0a4c6a0054e207d563af0:fn-bugfix&#34;&gt;And the &lt;a href=&#34;https://github.com/tehn/mod/pull/73&#34;&gt;bug fix&lt;/a&gt;
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:d872790bb8e0a4c6a0054e207d563af0:fn-bugfix&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:d872790bb8e0a4c6a0054e207d563af0:fn-citation&#34;&gt;Toussaint, G. T. (2005, July). The Euclidean algorithm generates traditional musical rhythms. &lt;em&gt;In Proceedings of BRIDGES: Mathematical Connections in Art, Music and Science&lt;/em&gt; (pp. 47-56).
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:d872790bb8e0a4c6a0054e207d563af0:fn-citation&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:d872790bb8e0a4c6a0054e207d563af0:fn-values&#34;&gt;As an aside, the values for all the Euclidean rhythms have been precomputed and saved as jagged C arrays (~2kb) to avoid having to perform Bjorklund&amp;rsquo;s algorithm on the Teletype.
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:d872790bb8e0a4c6a0054e207d563af0:fn-values&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:d872790bb8e0a4c6a0054e207d563af0:fn-yet&#34;&gt;&lt;a href=&#34;https://github.com/samdoshi/monome-mod/commit/5cf6dd2&#34;&gt;Well&amp;hellip;, maybe not yet&lt;/a&gt;
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:d872790bb8e0a4c6a0054e207d563af0:fn-yet&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>